# Function

## 函数

模块化程序设计，函数是最小单位。

* 函数分为标准库函数和自定义函数
    * prinf()、scanf()等函数就是标准库函数。通过头文件引入
    * 如果库函数无法满足，自行编写的函数称为自定义函数

```c
#include <stdio.h>

int fun(int n);

int main()
{
    int sum = 1;
    printf("%d", fun(sum)); // 2
}

int fun(int n)//也可不带参数名
{
    int a = 1;
    return n + 1;
}
```

* `int fun()`中,`int`为**函数返回值类型**，函数名`fun`是函数的唯一标识
* `(int n)`,函数头部的参数称为**形参**，也属于内部变量
* `{}`括住函数体，函数体内定义的变量只能在函数内访问，称为**内部变量**
* 当函数没有返回值时，需要指定返回值类型为`void`,比如`void fun(...)`
* 函数的返回值只能有一个，返回值类型可以是除数组以外的任何类型
* `fun(sum)`为函数调用，其中`sum`为**实参**(实际参数)
* `int fun(int n);`/`int fun(int);`称为**函数原型**，用于在函数的头部声明函数。注意函数原型会在语句结尾加上`;`

    ---

* main()函数是程序的**入口函数**
    * 即使在函数中省略 `return 0;`时，编译器也会自动补上
    * 即main()默认返回值为0，C语言约定返回0表示运行成功
* 如果函数的参数是一个变量，调用时传入的是变量的**拷贝**

    ```c
    #include <stdio.h>

    int main()
    {
        int increment(int a)
        {
            a++;
            return a;
        }
        int i = 10;
        increment(i);
        printf("%d\n", i); // 10
        i = increment(i);
        printf("%d\n", i); // 11
    }

    ```

---

## 变量

变量和函数都有两个属性：数据类型和数据的存储类型

存储类型包括：

1. 自动变量(auto变量/动态局部变量)
    * `auto 类型名 变量名;`例如`auto int temp;`
    * **默认情况**下定义的变量都是自动变量
    * 自动变量在所在函数调用时，创建存储空间，**调用结束后自动释放空间**
2. 静态变量
    * `static 类型名 变量名;`例如`static int temp;`
    * 在函数内定义的静态变量，称为静态局部变量，作用域为定义他的函数
    * 在所有函数外定义的静态变量，称为静态全局变量，可以在定义他的文件内访问，但无法跨文件访问
    * 静态变量在初始化后便**不会随着函数关闭而释放内存**
3. 寄存器变量(register)
    * `register 类型名 变量名`
    * 一般情况下变量的值是放在内存中的，使用关键字`register`可以将变量存储在cpu的寄存器中，寄存器的存取速度远高于内存。但编译系统能识别使用频繁的变量且将变量存储在寄存器中。基本不需要手动指定
4. 外部变量(extern)
    * `extern 类型名 变量名;`
    * 外部变量是在函数的外部定义的全局变量
    * 作用域是从定义处到文件结束
    * 本文件的外部变量只需在main 函数外定义既可
    * 跨文件引入变量
        * 在主文件引入 `int A`
        * 在需拓展的子文件中头部使用 `extern A;` 拓展声明
        * 主文件中需控制外部变量作用域可 `static int A`,来使外部变量变为静态外部变量。从而避免外部变量的跨文件污染问题
        * 想在定位点之前中使用，也需使用extern关键字进行声明
    * 外部变量保存在静态存储区内，在程序运行期间分配固定的存储单元，其生存周期是整个程序的运行期
    * 没有显式初始化的外部变量自动初始化为0

---

1. 内部函数
    * 只能在本文件被其他文件调用
    * 使用`static int fun()` 定义
    * 避免多文件函数污染
    * 通常把由本文件使用的函数和外部变量放在文件的开头，且用static关键字来进行局部化
2. 外部函数
    * 在定义函数时，在函数最左端添加关键字`extern`,则声明为外部函数
    * `extern void int fun()`
    * C规定，在定义函数未添加`extern`的函数默认为外部函数
    * 在文件中需要调用其他文件的外部函数，也需要声明

---

## <stdio.h> 标准函数库

### printf()

`printf(格式控制字符串)`

1. d格式符 : 用来输出一个有符号的十进制整数，可以在格式声明中指定输出的宽度 `%5d`
    * `printf("%5d" , 1)` 输出结果为`    1`
2. c格式符 ： 用来输出**一个**字符.同样支持指定宽度 `%5c`
    * 当以c格式符输出整数时，会输出该整数作为ASCII码所对应的字符
        * `short a = 121; printf("%c" , a)` 输出 `y`
        * `int a = 377; printf("%c" , a)` 输出 `y` , 因为%c只考虑一个字节，所以只输出整数最后一个字节的信息。01111001,所对应的ASCII码是'y'
3. s格式符 ：用来输出一个字符串
4. f格式符 ：用来输出实数(单双精度，长双精度值)，以小数形式输出
    * `%f`计算double1/3，输出 `0.333333`
    * 指定数据宽度和小数位数：`%20.15f`计算double1/3，输出`   0.333333333333333`
    * 输出数据向左对齐 ：`%20.15f`计算double1/3，输出`0.333333333333333   `
5. e格式符 : 指定以指数形式输出实数
    * `printf("%e",123.456);` 输出 `1.234560e+002`
    * `printf("%13.2e",123.456);` 输出 `    1.23e+002`
6. i格式符 ：作用于d相同，但多用%d而少用%i
7. o格式符 ：以八进制整数形式输出。
8. x格式符 ：以十六进制数形式输出整数
9. u格式符 ：用来输出无符号型数据，以十进制整数形式输出
10. g格式符 ：用来输出浮点数，系统自动选择f格式或e格式输出，选择其中较短的格式，不输出无意义的0

---

|格式字符|说明|
|:-------:|:-------:|
|d,i|以带符号的十进制形式输出整数(正数不输出符号)|
|o|以八进制无符号形式输出整数(不输出前导符0)|
|x,X|以十六进制无符号形式输出整数(不输出前导符0x)，用x/X输出a/A ~ z/Z的形式|
|u|以无符号十进制形式输出整数|
|c|以字符形式输出，只输出一个字符|
|s|输出字符串|
|f|以小数形式输出单、双精度数，隐含输出6位小数|
|e,E|以指数形式输出实数，用e/E时指数用e/E表示，如1.2e/E+02()|
|g,G|选用%f或%e格式中输出宽度较短的一种表达方式，不输出无意义数0，用G时，若以指数形式输出，这指数以大写表示|

---

|格式附加字符|说明|
|:-------:|:-------:|
|l|用于长整型整数，可加在格式符d、o、x、u 前面|
|m (%[m]...)|数据最小宽度(%5d)|
|n (%[m.n]...)|对实数，表示输出n位小数，对字符串，表示截取的字符串长度|
|-|输出的数字或字符在域内左浮动|

<small>如果想输出字符'%'，则`printf("%f%%\n" , ...)`,使用连续两个%输出</small>

---

### scanf()

`scanf(格式控制字符串，参数地址表);`

|格式转换说明符|说明|
|:-------:|:-------:|
|%d|输入十进制整数|
|%o|输入八进制整数|
|%x|输入十六进制整数|
|%c|输入一个字符，空白(空格、回车、制表)符也作为有效输入|
|%s|输入一个字符，遇到空白(空格、回车、制表)符时，终止读入|
|%f/%e|输入实数，小数或指数均可|
|%%|输入一个百分号|

|格式修饰符|说明|
|:-------:|:-------:|
|l|加在格式符 d,o,x,u 之前，用于输入long型数据。加在格式符 f,e 之前，用于输入double型数据|
|L|加在格式符 f,e 之前，用于输入long double型数据|
|h|加在格式符 d,o,x 之前，用于输入short型数据|
|域宽 m (正整数)|指定输入数据的宽度，系统按照宽度截取数据|
|显示精度 .n (0或正整数)|scanf()没有精度修饰符，即用scanf()输入实型数据时不能规定精度|
|忽略输入修饰符 *|表示对应的输入项在读入后不赋给响应的变量|

* 标准情况：`scanf("%d" , &a)` 键入`1`来完成函数
* 其他字符情况：`scanf("a=%d" , &a)` 键入`a=1`来完成函数

* 输入结束情况
    * 输入空格符、回车符、制表符
    * 达到输入域宽
    * 输入非法字符

```c
#include <stdio.h>

int main()
{
    int a,b;
    float c, d=1.234;
    scanf("%2d%*2s%2d" , &a , &b);//输入123456
    printf("%d,%d\n" , a , b);//12,56
    scanf("%3.1f" , &c);//输入123.4
    printf("%f%10.2f" , c , d);//0.000000      1.23
}
```

* `%*2s`：2长度的忽略输入的字符串
* `%3.1f`: scanf中不能使用精度修饰符，导致输出`0.000000`
* `%10.2f`: 最小宽度10，小数部分宽度2,导致输入`      1.23`

* ~`scanf("%d\n" , &a)`~
* ~`scanf("%8.2f" , &c)`~

---

### fflush()

### exit()

用来终止函数的运行，一旦执行到该函数，程序就会立即结束
