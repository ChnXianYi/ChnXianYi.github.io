# C程序设计(第四版-谭浩强)

## 第一章 程序设计和C语言

### 1.1 什么是计算机程序

所谓程序，就是一组计算机能识别和执行的命令

### 1.2 什么是计算机语言

* **机器语言**：计算机能够识别的长度16的二进制数(0,1)
    * 这些计算机能直接识别的二进制代码为**机器指令**
    * 机器指令集就是**机器语言**

* **符号语言**又称为**符号汇编语言/汇编语言**是由一些英文字母和数字表示一个指令

---

* 由于机器语言和汇编语言比较贴近计算机，因此也被归纳为**低级语言**

* 为了克服低级语言的缺点，20世纪50年代出现了第一个计算机高级语言。(FORTRAN)

* 由于这种语言功能性强，可以通过**编译程序**将高级语言编译的**源程序**编译为机器指令

---

### 1.3 C语言的发展及其特点

C是一种通用的编程语言，广泛用于系统软件与应用软件的开发。于1969年至1973年间，为了移植与开发UNIX操作系统，由丹尼斯·里奇与肯·汤普逊，以B语言为基础，在贝尔实验室设计、开发出来。

当前最新的 C 语言标准为 C18 ，在它之前的 C 语言标准有 C17、C11...C99 等。

特点：

* 语法限制不太严格，程序设计自由度大
* C允许直接访问物理地址。能进行位(bit)操作，可以直接对硬件进行操作
* 可移植性好
* 程序执行效率高

---

### 1.4 最简单的C语言程序

#### 例 1.1

```c
# include <stdio.h>

int main(){
    printf("This is a program.\n");
    return 0;
}
```

<output data-lang="output">
This is a program.
</output>

* `main`是主函数，每一个C语言程序都不必须有一个main函数
* `int`表示此函数的类型是int类型(整型)
* `# include <stdio.h>`提供编译系统要求的关于的函数的信息。
    * `stdio.h`是系统提供的一个文件名，stdio是'standard input'&'output'的缩写。
    * `.h`的意思是头文件(header file)
    * 编译器需要的输入输出函数的相关信息已事先存放在stdio.h文件中。因此，在程序中如要用到标准函数库的的函数，需在文件头部写上`# include <stdio.h>`

<small>C99建议把main函数指定为int型，它要求返回一个整数值。当主函数正常结束时，得到的函数为0.错误时为一个非0的整数.可以通过返回值来判断main函数是否正常执行</small>

---

#### 例 1.2

```c
# include <stdio.h>

int main(){
    int a , b ,sum;
    a = 123,
    b = 456;
    sum = a + b;
    printf("sum is %d\n",sum);
    return 0;
}
```

<output data-lang="output">
sum is 579
</output>

* `%d`在printf库函数中为**以十进制形式输出带符号整数(正数不输出符号)**

---

#### 例 1.3

```c
#include <stdio.h>

int main()
{
    int max(int x, int y);
    int a, b, c;
    scanf("%d,%d", &a, &b);
    c = max(a, b);
    printf("max= %d\n", c);
    return 0;
}
int max(int x, int y)
{
    int z;
    if (x > y)
        z = x;
    else
        z = y;
    return z;
}
```

<output data-lang="output">

8,5

  max=8

</output>

* `scanf`输入变量a,b的值
* `&a`是变量a的地址

---

### 1.4.2 C语言程序的结构

* 一个程序由一个或多个源程序文件组成
    * 预处理指令 如`#include <stdio.h>`
    * 全局声明
    * 函数定义
* 函数是C语言程序的主要组成部分
* 一个函数包含两部分
    * 函数首部
    * 函数体
* 程序总是从main函数开始执行的
* 程序中对计算机的操作是由函数中的C语句完成的
* 在每个数据声明和语句的最后必须有一个分号
* C语言本身不提供输入输出语句(依赖scanf/printf)
* 程序应当包含注释

---

### 1.5 运行C程序的步骤与方法

如何运行

1. 编译源程序文件 (e.c)
2. 对源程序进行编译
3. 进行连接处理
4. 运行可执行文件

---

### 1.6 程序设计的任务

1. 问题分析
2. 设计算法
3. 编写程序
4. 对源程序进行编辑，编译和连接
5. 运行程序，分析结果
6. 编写程序文档

---

## 第二章 算法——程序的灵魂

### 2.1 什么是算法

算法（Algorithm）是指解题方案的准确而完整的描述

---

### 2.2 简单的算法举例

#### 例 2.5 判断一个大于或等于3的正整数是否为素数

* 只需判断是否能被 2~√N 之间的整数整除

### 2.3 算法的特性

* 有穷性
* 确定性
* 有零个或多个输入
* 有一个或多个输出
* 有效性

---

### 2.4 怎样表示一个算法

流程图…………

---

### 2.5 结构化程序设计方法

…………

## 第三章 最简单的C程序设计-顺序程序设计

### 3.1 顺序程度设计举例

#### 例 3.1

将温度计测量出用华氏法表示的温度转化为摄氏度

华氏度转为摄氏度的公式为 `c=5/9(f-32)`

```c
# include <stdio.h>

int main()
{
    float f , c; // 声明浮点型变量或函数返回值类型
    f = 64.0;
    c = (5.0/9) * (f-32);
    printf("f=%f\nc=%f\n",f,c);
    return 0;
}
```

<output data-lang="output">

  f=64.000000

  c=17.777779

</output>

---

#### 例 3.2

计算存款利息。1000元分别活期年利率r1,一年定期r2,两次半年定期r3.计算出一年后按3种方法所得到的本金和利息和

```c
# include <stdio.h>

int main()
{
    float p0 = 1000, r1 = 0.0036 , r2 = 0.0225 , r3 = 0.0198 , p1 , p2 , p3;
    p1 = p0*(1+r1);
    p2 = p0*(1+r2);
    p3 = p0*(1+r3);
    printf("p1=%f\np2=%f\np3=%f" , p1 , p2 , p3);
    return 0;
}
```

<output data-lang="output">

  p1=1003.599976

  p2=1022.500061

  p3=1019.799927

</output>

---

### 3.2 数据的表现形式及其运算

#### 3.2.1 常量和变量

在计算机高级语言中，数据有两种表现形式：常量和变量

##### 常量

在程序运行过程中，其值不能被改变的量称为常量。

1. 整型常量：通常的整数，包括正整数、负整数和0
2. 实型常量：又称实数或浮点数。 在C语言中可以用单精度型和双精度型两种形式表示实型常量，分别用类型名float和double进行定义 。
    * 十进制小数形式：123.456；0.789
    * 指数形式：
        * 12.34e5(12.34*10^5)
        * 0.14E-25(0.14*10^(-25))
3. 字符常量：一对单撇号括起来的字符序列
    * 普通字符："a","1"
    * 转义字符：以字符`\`开头的字符序列

---

转义字符及其作用

|转义字符|含义|输出|
|:-------:|:-------:|:-------:|
|`\'`|'字符|\'|
|`\"`|"字符|\"|
|`\?`|?字符|\?|
|`\\`|\字符|\\|
|`\a`|警告(alert)|产生声音或视觉信号|
|`\b`|退格符 (backspace)|将当前位置后退一个字符|
|`\f`|换页符 (form feed)|将当前位置移到下一页的开头|
|`\n`|换行符|将当前位置移到下一行的开头|
|`\r`|回车符 (carriage return)|将当前位置移到本行的开头|
|`\t`|水平制表符|将当前位置移到下一个tab位置|
|`\v`|垂直制表符|将当前位置移到下一个垂直制表对齐点|
|`\0`(0代表一个八进制数字)|转换为对应的ASCII字符||
|`\xh[0……]`(0代表一个十六进制数字)|转换为对应的ASCII字符||

---

4. 字符串常量：用双撇号把若干个字符括起来

!> 单撇号只是界限符。单撇号内只能包含一个字符，双撇号内可以包含字符串

5. 符号常量：用`# define`指令，指定用一个符号名称代表一个常量
    * `# define PI 3.1416`,文件将会从此行开始所有的PI都代表3.1416.
    * 符号常量通常用大写表示

---

##### 变量

一个有名字的，具有特定属性的一个存储单元。用来存放数据

变量必须**先定义，后使用**

---

##### 常变量

`const int a = 3;`

将a被定义为一个整型变量，指定值为3.且在变量存在期间其值不能改变

##### 标识符

在计算机高级语言中，用来对变量，符号常量名，函数，数组，类型等命名的有效字符序列统称为**标识符**

C语言规定标识符只能由字母、数字、下划线三种字符组成，且第一个字符必须为字母或下划线

---

#### 3.2.2 数据类型

在 C 语言中，数据类型指的是用于声明不同类型的变量或函数的一个广泛的系统。变量的类型决定了变量存储占用的空间，以及如何解释存储的位模式。

数据类型分为 基本类型 、 枚举类型(enum) 、 空类型(void) 、 派生类型

其中**基本类型**分为：

* 整型类型
    * 基本整型(int)
    * 短整型(short int)
    * 长整型(long int)
    * 双长整型(long long int)
    * 字符型(char)
    * 布尔型(bool)
* 浮点类型
    * 单精度浮点型(float)
    * 双精度浮点型(double)
    * 复数浮点型(float_complex,double_comple,long long_comple)

**派生类型**则分为：

* 指针类型(*)
* 数组类型([])
* 结构体类型(struct)
* 共用体类型(union)
* 函数类型()

---

#### 3.2.2 整型数据

##### 整型数据的分类

1. 基本整型(int)

编译系统分配给int型数据2个字节或4个字节(由系统位数决定)

2. 短整型(short int)

类型名为short int 或 short

3. 长整型(long int)

类型名为long int 或 long

4. 双长整型(long long int)

类型名为long long int 或 long long,一般分配8个字节。是C99新增的类型，许多C编译系统尚未实现

---

##### 整型变量的符号属性

整型数据常见的存储空间和值的范围

|类型|字节数|取值范围|
|:-------:|:-------:|:-------:|
|int(基本整型)|2|-32,768 ~ 32,767|
|int(基本整型)|4|-2,147,483,648 ~ 2,147,483,647|
|unsigned int(无符号基本整型)|2|0 ~ 65,535|
|unsigned int(无符号基本整型)|4|0 ~ 4,294,967,295|
|short(短整型)|2|-32,768 ~ 32,767|
|unsigned short(无符号短整型)|2|0 ~ 65,535|
|long(长整型)|4|-2,147,483,648 ~ 2,147,483,647|
|unsigned long(无符号长整型)|4|0 ~ 4,294,967,295|
|long long(双长整型)|8|-9223372036854775808 ~ 9223372036854775807|
|unsigned long long(无符号双长整型)|8|0 ~ 18446744073709551615|

---

在实际应用中，有的数据的范围常常只有正值，为了充分利用变量的值的范围，可以将变量定义为`无符号类型`。在类型符号前加上修饰符`unsigned`，表示该变量是无符号整数类型，如果加上`signed`则是有符号类型

在默认情况下，变量类型前会有`signed`,但一般省略不写

