# 类型转换与运算符

## 自动(隐式)类型转换

C编译器会在操作数运算之前将所有操作数转为数值范围较大的操作数类型，称为**类型提升**

* 转换按数据长度增加的方向进行，以保证数值不失真，或者精度不降低
* char 和 short 参与运算时，会提升成 int 类型。称为**整数提升**
* 无符号和有符号的混合运算中，有符号类型会转换为无符号类型
* 浮点数赋给整型，该浮点数小数被舍去；
![alt:'typePromotion'](https://img-bc.icode.best/20200327214625196.png)
<small>自动(隐式)类型转换是编译器自动进行转换的，不会出现警告和错误；</small>

---

赋值语句中，类型转换会将右侧的值转为左侧变量的类型

```c
#include <stdio.h>

int main()
{
    int i;
    float f = 5.0;
    double d;
    i = f;
    f = i;
    d = f;
    printf("%d~%f~%f~%f" , i,f,d);
    //5~5.000000~5.000000
}
```

---

## 强制类型转换

强制类型转换能有效的避免数据丢失、类型溢出的隐患。

只需 (类型)表达式

```c
#include <stdio.h>

int main()
{
    int i = 5;
    float f = 1.9, f1 = 1.8;
    printf("%f\n", (float)(i / 2)); // 2.000000
    printf("%f\n", (float)i / 2);   // 2.500000 先将i转为float,i/2则自动转为float
    printf("%d\n", (int)(f + f1));  // 3 转为int类型会直接抹除小数取整
    printf("%d\n", (int)(f + f1)%2);// 1 %运算符两边均需为整型量 
}
```

---

